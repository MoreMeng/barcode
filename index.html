<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous">
  <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"> -->
  <title>Barcode</title>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Libre+Barcode+128+Text&display=swap" rel="stylesheet">
  <style>
    .barcode {
      font-family: 'Libre Barcode 128 Text', cursive;
      white-space: pre;
    }

    .pntLot {
      font-size: 12mm;
      line-height: 80%;
    }

    .pntExp {
      font-size: 12mm;
      line-height: 80%;
    }

    .pntSn {
      font-size: 10mm;
      line-height: 80%;
    }

    input {
      font-family: 'Cascadia Code', Consolas, 'Courier New', monospace;
      font-size: 2em !important;
    }

    @media print {

      html,
      body {
        width: 88mm !important;
        height: 62mm !important;
        margin: 0;
        padding: 0;
      }

      #print .list-group {
        page-break-after: always;
      }
    }
  </style>
</head>

<body>
  <!--content start-->
  <div class="container pt-5 mb-5 d-print-none">
    <div class="row justify-content-center">
      <div class="col-md-6">
        <div class="card shadow-lg p-3 mb-5 bg-body rounded">
          <div class="card-body">
            <div class="text-center m-auto">
              <h4 class="text-uppercase text-center">Sinovac Barcode</h4>
            </div>
            <form action="#" method="post">
              <input type="hidden" name="csrftoken" value="ea49375f43c7e6a59c77df1e4de562b3f1350124eeb70e5d5124e4ce3b5251c2b4d12e9aaf2a3ddc618c178c8dc4620b">
              <div class="mb-3">
                <label for="emailaddress">Lot No</label>
                <input id="lot" type="text" name="lot" placeholder="Lot Number" class="form-control" required="" value="J202103001">
              </div>
              <div class="mb-3">
                <label for="emailaddress">Expire Date</label>
                <input id="exp" type="text" name="exp" placeholder="Expire Date" class="form-control" required="" value="01/09/2564">
              </div>
              <div class="mb-3">
                <label for="emailaddress">Serial</label>
                <input id="sn" type="text" name="sn" placeholder="Lot Number" class="form-control" required="" value="121345678901234567890">
              </div>
              <div class="row">

                <div class="col-6 mb-3">
                  <label for="emailaddress">กล่องที่</label>
                  <input id="box" type="number" name="box" class="form-control" required="" value="1">
                </div>

                <div class="col-6 mb-3">
                  <label for="emailaddress">ขวดที่</label>
                  <input id="bot" type="number" name="bot" class="form-control" value="1">
                </div>
              </div>

              <div class="mb-0 text-center">
                <button class="btn btn-primary btn-lg fs-1 w-50 rounded-pill" type="button" name="submit" onClick="generate(); return false;">Print</button>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div id="print" class="d-none d-print-block">
    <ul class="list-group list-group-flush pt-5 ms-3">
      <li class="list-group-item ps-0"><span class="d-inline-block w-25">Lot No.</span><span class="barcode pntLot" id="pntLot"></span></li>
      <li class="list-group-item ps-0"><span class="d-inline-block w-25">S/N</span><span class="barcode pntSn" id="pntSn"></span></li>
      <li class="list-group-item ps-0"><span class="d-inline-block w-25">Exp</span><span class="barcode pntExp" id="pntExp"></span></li>
      <li class="list-group-item ps-0 d-flex">
        <div class="d-inline-block w-25"></div>
        <div class="d-inline-block col">กล่องที่ <span id="pntBox"></span></div>
        <div class="d-inline-block col">ขวดที่ <span id="pntBot"></span></div>
      </li>
    </ul>
    <ul class="list-group list-group-flush pt-5 ms-3">
      <li class="list-group-item ps-0"><span class="d-inline-block w-25">Lot No.</span><span class="barcode pntLot" id="pntLot2"></span></li>
      <li class="list-group-item ps-0"><span class="d-inline-block w-25">S/N</span><span class="barcode pntSn" id="pntSn2"></span></li>
      <li class="list-group-item ps-0"><span class="d-inline-block w-25">Exp</span><span class="barcode pntExp" id="pntExp2"></span></li>
      <li class="list-group-item ps-0 d-flex">
        <div class="d-inline-block w-25"></div>
        <div class="d-inline-block col">กล่องที่ <span id="pntBox2"></span></div>
        <div class="d-inline-block col">ขวดที่ <span id="pntBot2"></span></div>
      </li>
    </ul>
  </div>

  <!--content end-->
  <!-- JavaScript -->
  <!-- <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.6.0/dist/umd/popper.min.js" integrity="sha384-KsvD1yqQ1/1+IA7gi3P0tyJcT3vR+NdBTt13hSJ2lnve8agRGXTTyNaBYmCR/Nwi" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js" integrity="sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG" crossorigin="anonymous"></script> -->
  <script src="node_modules/code-128-encoder/code-128-encoder.min.js"></script>
  <script>
    const beforePrint = () => {
      console.log('Functionality to run before printing.');
    };

    const afterPrint = () => {
      console.log('Functionality to run after printing');
      const bot = document.getElementById("bot").value++;
      console.log(bot);
      // pntBot = bot++;
    };

    function generate() {
      const encoder = new Code128Generator();

      const lot = document.getElementById("lot").value;
      const exp = document.getElementById("exp").value;
      const sn = document.getElementById("sn").value;
      const box = document.getElementById("box").value;
      const bot = document.getElementById("bot").value;

      // const printImg = document.getElementById("print");
      // const pntLot = document.getElementById("pntLot");
      // const pntExp = document.getElementById("pntExp");
      // const pntSn = document.getElementById("pntSn");
      // const pntBox = document.getElementById("pntBox");
      // const pntBot = document.getElementById("pntBot");
      // pntLot.innerHTML = `${encoder.encode(lot)}`;
      // pntExp.innerHTML = `${encoder.encode(exp)}`;
      // pntSn.innerHTML = `${encoder.encode(sn)}`;
      // pntBox.innerHTML = `${box}`;
      // pntBot.innerHTML = `${bot}`;

      document.getElementById("pntLot").innerHTML = `${encoder.encode(lot)}`;
      document.getElementById("pntExp").innerHTML = `${encoder.encode(exp)}`;
      document.getElementById("pntSn").innerHTML = `${encoder.encode(sn)}`;
      document.getElementById("pntBox").innerHTML = `${box}`;
      document.getElementById("pntBot").innerHTML = `${bot}`;

      document.getElementById("pntLot2").innerHTML = `${encoder.encode(lot)}`;
      document.getElementById("pntExp2").innerHTML = `${encoder.encode(exp)}`;
      document.getElementById("pntSn2").innerHTML = `${encoder.encode(sn)}`;
      document.getElementById("pntBox2").innerHTML = `${box}`;
      document.getElementById("pntBot2").innerHTML = `${bot}`;



      // const listGroup = document.querySelector('.list-group');
      // let cln = listGroup.cloneNode(true);
      // listGroup.replaceChild(cln, listGroup.childNodes[0]);

      // var item = document.getElementById("myList").childNodes[0];

      // document.getElementById("print").append(cln);
      // listGroup.after(cln);

      // listGroup.removeChild(cln);

      window.print();

    }

    (function () {
      window.onbeforeprint = beforePrint;
      window.onafterprint = afterPrint;
      // generate();
    }());
  </script>
</body>

</html>